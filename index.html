<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blackjack Game</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header / Profile -->
    <div class="app-header">
        <div id="user-profile-display" class="profile-display" style="display: none;">
            <span>üë§ <span id="profile-name">Tyler</span></span>
            <button id="logout-btn" class="btn-text">Sign Out</button>
        </div>
        <button id="login-btn" class="btn-text" style="display: none;">Sign In</button>
    </div>

    <!-- Main Tab Navigation -->
    <nav class="main-tabs">
        <button class="tab-btn active" data-tab="tab-wash">üÉè Blackjack</button>
        <button class="tab-btn" data-tab="tab-sports">üèà Sportsbook</button>
        <button class="tab-btn" data-tab="tab-craps">üé≤ Craps</button>
        <button class="tab-btn" data-tab="tab-poker">‚ô†Ô∏è Poker</button>
        <button class="tab-btn" data-tab="tab-health">‚ù§Ô∏è Health</button>
        <button class="tab-btn" data-tab="tab-guide">üìö Guide</button>
    </nav>


    <main class="tab-content">
        <!-- Tab 1: The Wash Counter (Existing Game) -->
        <div id="tab-wash" class="tab-pane active">
            <div class="sidebar-container">
                <div class="strategy-advisor" id="strategy-advisor">
                    <div class="advisor-header">
                        <h3>üéØ Strategy Advisor</h3>
                    </div>
                    <div class="advisor-content">
                <div class="recommendation" id="recommendation">
                    <p>Place a bet to get strategy advice</p>
                </div>
                <div class="advisor-details" id="advisor-details"></div>
                
                <!-- Blackjack Simulator Integration -->
                <div id="simulator-stats" style="margin-top: 15px; padding: 10px; background: rgba(0, 0, 0, 0.3); border-radius: 6px; display: none;">
                    <div style="color: #fbbf24; font-size: 0.85em; font-weight: bold; margin-bottom: 8px;">üéØ Simulator Analysis</div>
                    <div id="simulator-ev" style="color: #cbd5e1; font-size: 0.8em; margin-bottom: 5px;"></div>
                    <div id="simulator-error" style="color: #f87171; font-size: 0.8em;"></div>
                </div>
            </div>
        </div>
        
        <!-- Card Count Tracker (only visible in manual entry mode) -->
        <div id="card-count-tracker" class="card-count-tracker" style="display: none;">
        <div class="tracker-header">
            <h3>Card Count Tracker</h3>
            <div class="count-display">
                <div>Running: <span id="tracker-running-count">0</span></div>
                <div>True: <span id="tracker-true-count">0</span></div>
            </div>
        </div>
        <div id="manual-card-pad" class="manual-card-pad"></div>
        <div class="suits-control-section">
            <label class="suits-checkbox-label">
                <input type="checkbox" id="suits-mode-toggle" />
                <span>Suits</span>
            </label>
            <select id="suit-selector" class="suit-selector" style="display: none;">
                <option value="‚ô†">‚ô† Spades</option>
                <option value="‚ô•">‚ô• Hearts</option>
                <option value="‚ô¶">‚ô¶ Diamonds</option>
                <option value="‚ô£">‚ô£ Clubs</option>
            </select>
        </div>
        <div class="card-history-section">
            <div class="history-header">
                <h4>Card History (Last 30)</h4>
            </div>
            <div id="card-history-list" class="card-history-list">
                <div class="history-empty">No cards tracked yet</div>
            </div>
        </div>
        <div class="tracker-actions">
            <button id="reset-count-btn" class="btn btn-small">Reset Count</button>
        </div>
        </div>
    </div> <!-- End sidebar-container -->
    <div class="container">
        <header>
            <h1>‚ô†Ô∏è Blackjack ‚ô•Ô∏è</h1>
            <div class="header-stats">
                <div class="balance-container">
                    <span>Balance: $</span>
                    <span id="balance">10000</span>
                </div>
                <div class="count-container">
                    <span>Running Count: </span>
                    <span id="running-count">0</span>
                </div>
            </div>
        </header>

        <div class="game-area">
            <div class="dealer-section">
                <h2>Dealer</h2>
                <div class="score" id="dealer-score">Score: -</div>
                <div class="cards" id="dealer-cards"></div>
            </div>

            <div class="player-section">
                <h2>Player</h2>
                <div id="hand1-container">
                    <div class="score" id="player-score">Score: -</div>
                    <div class="cards" id="player-cards"></div>
                </div>
                <div id="hand2-container" style="display: none;">
                    <div class="score" id="player-score-2">Hand 2 Score: -</div>
                    <div class="cards" id="player-cards-2"></div>
                </div>
            </div>
        </div>

        <div class="settings-section">
            <div class="deck-selector">
                <label for="deck-count">Number of Decks: </label>
                <select id="deck-count" disabled>
                    <option value="1" selected>1 Deck</option>
                    <option value="2">2 Decks</option>
                    <option value="4">4 Decks</option>
                    <option value="6">6 Decks</option>
                    <option value="8">8 Decks</option>
                </select>
            </div>
            <div class="min-bet-display">
                <span>Minimum Bet: $<span id="min-bet">50</span></span>
            </div>
            <div class="cards-remaining-display">
                <span>Cards Remaining: <span id="cards-remaining">52</span></span>
            </div>
        </div>
        
        <div class="manual-card-entry-section">
            <label>
                <input type="checkbox" id="manual-entry-toggle"> Enable Manual Card Entry
            </label>
            <div id="manual-entry-info" style="display: none; margin-top: 5px; font-size: 0.9em; color: #4CAF50;">
                Click on card positions to add cards directly to hands
            </div>
        </div>
        
        <!-- Card Selection Modal -->
        <div id="card-selection-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center;">
            <div style="background: white; padding: 20px; border-radius: 10px; max-width: 400px;">
                <h3>Select a Card</h3>
                <div style="margin: 15px 0;">
                    <label for="modal-card-value">Value: </label>
                    <select id="modal-card-value" style="padding: 5px; margin: 5px;">
                        <option value="A">A</option>
                        <option value="2">2</option>
                        <option value="3">3</option>
                        <option value="4">4</option>
                        <option value="5">5</option>
                        <option value="6">6</option>
                        <option value="7">7</option>
                        <option value="8">8</option>
                        <option value="9">9</option>
                        <option value="10">10</option>
                        <option value="J">J</option>
                        <option value="Q">Q</option>
                        <option value="K">K</option>
                    </select>
                </div>
                <div style="margin: 15px 0;">
                    <label for="modal-card-suit">Suit: </label>
                    <select id="modal-card-suit" style="padding: 5px; margin: 5px;">
                        <option value="‚ô†">‚ô† Spades</option>
                        <option value="‚ô•">‚ô• Hearts</option>
                        <option value="‚ô¶">‚ô¶ Diamonds</option>
                        <option value="‚ô£">‚ô£ Clubs</option>
                    </select>
                </div>
                <div style="margin-top: 20px;">
                    <button id="confirm-card-btn" class="btn" style="margin-right: 10px;">Add Card</button>
                    <button id="cancel-card-btn" class="btn">Cancel</button>
                </div>
            </div>
        </div>
        
        <div class="penetration-section">
            <label for="penetration-slider">Deck Penetration: <span id="penetration-value">100</span>%</label>
            <input type="range" id="penetration-slider" min="50" max="100" value="100" step="5" disabled>
        </div>

        <div class="betting-section">
            <label for="bet-amount">Bet Amount: $</label>
            <input type="number" id="bet-amount" min="50" value="50" max="1000" step="50">
            <button id="place-bet-btn" class="btn btn-bet">Place Bet</button>
            <button id="use-recommended-btn" class="btn btn-recommended">Use Recommended</button>
        </div>

        <div class="controls">
            <button id="hit-btn" class="btn btn-hit" disabled>Hit</button>
            <button id="stand-btn" class="btn btn-stand" disabled>Stand</button>
            <button id="double-btn" class="btn btn-double" disabled>Double</button>
            <button id="split-btn" class="btn btn-split" disabled>Split</button>
            <button id="insurance-btn" class="btn btn-insurance" disabled>Insurance</button>
            <button id="surrender-btn" class="btn btn-surrender" disabled>Surrender</button>
            <button id="new-game-btn" class="btn btn-new-game" disabled>Reset Shoe</button>
        </div>
        
        <!-- Result Logging (LIVE MIRROR Mode Only) -->
        <div id="result-logging" style="display: none; margin-top: 20px; padding: 15px; background: rgba(239, 68, 68, 0.1); border-radius: 10px; border: 1px solid rgba(239, 68, 68, 0.3);">
            <div style="color: #f87171; font-weight: bold; margin-bottom: 10px; font-size: 0.9em;">üìù Log Hand Result</div>
            <div style="display: flex; gap: 10px;">
                <button id="log-win-btn" class="btn" style="flex: 1; background: #22c55e;">‚úÖ Won</button>
                <button id="log-loss-btn" class="btn" style="flex: 1; background: #ef4444;">‚ùå Lost</button>
                <button id="log-push-btn" class="btn" style="flex: 1; background: #fbbf24; color: #000;">ü§ù Push</button>
            </div>
            <div style="margin-top: 10px; font-size: 0.85em; color: #94a3b8;">
                After playing a hand on the real site, click the result to update your tracking.
            </div>
        </div>

        <div class="message" id="message"></div>
    </div>
    </div> <!-- End of tab-wash -->

    <!-- Tab 2: Game Scanner -->
    <div id="tab-scanner" class="tab-pane">
        <div class="dashboard-container">
            <h2>üîç Game Scanner</h2>
            <p>Analyze game rules to determine wash suitability.</p>
            
            <div class="scanner-form">
                <div class="form-group">
                    <label>Blackjack Payout</label>
                    <select id="scan-payout">
                        <option value="1.5">3:2 (Standard)</option>
                        <option value="1.2">6:5 (Trap)</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Dealer Soft 17</label>
                    <select id="scan-soft17">
                        <option value="stand">Stands</option>
                        <option value="hit">Hits</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Shuffle Type</label>
                    <select id="scan-shuffle">
                        <option value="shoe">Shoe (4-8 Decks)</option>
                        <option value="csm">Continuous (CSM)</option>
                    </select>
                </div>
                <div id="scanner-result" class="scanner-result"></div>
            </div>
        </div>
    </div>

    <!-- Tab 3: Health Dashboard -->
    <div id="tab-health" class="tab-pane">
        <div class="dashboard-container" style="max-width: 1200px;">
            <h2>‚ù§Ô∏è Money Lifecycle Tracker</h2>
            
            <!-- Step 1: Dashboard (Read-Only Overview) -->
            <div id="health-dashboard" class="health-dashboard-section" style="margin-top: 25px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: #fbbf24; font-size: 1.2em; margin-bottom: 20px;">üìä Dashboard</h3>
                
                <!-- Top Card: Total Bankroll -->
                <div style="padding: 20px; background: linear-gradient(135deg, rgba(59, 130, 246, 0.2) 0%, rgba(37, 99, 235, 0.2) 100%); border-radius: 10px; margin-bottom: 20px; border: 1px solid rgba(59, 130, 246, 0.3);">
                    <div style="font-size: 0.9em; color: #94a3b8; margin-bottom: 8px;">Total Bankroll</div>
                    <div id="dashboard-total-bankroll" style="font-size: 2em; font-weight: bold; color: #60a5fa;">$0.00</div>
                </div>
                
                <!-- Health Gauge: Risk Level -->
                <div style="padding: 20px; background: rgba(0, 0, 0, 0.3); border-radius: 10px; margin-bottom: 20px;">
                    <div style="font-size: 0.9em; color: #94a3b8; margin-bottom: 8px;">Health Gauge</div>
                    <div id="dashboard-risk-level" style="font-size: 1.5em; font-weight: bold; color: #22c55e;">Risk Level: Low (Clean)</div>
                    <div style="margin-top: 10px; font-size: 0.85em; color: #cbd5e1;">
                        <div>Clean Money: <span id="dashboard-clean-money" style="color: #22c55e;">$0.00</span></div>
                        <div>Dirty Money: <span id="dashboard-dirty-money" style="color: #f87171;">$0.00</span></div>
                    </div>
                </div>
                
                <!-- Action Required -->
                <div id="dashboard-action-required" style="padding: 20px; background: rgba(251, 191, 36, 0.1); border-radius: 10px; border-left: 4px solid #fbbf24;">
                    <div style="font-size: 0.9em; color: #94a3b8; margin-bottom: 8px;">Action Required</div>
                    <div id="dashboard-action-text" style="font-size: 1.1em; color: #fbbf24; line-height: 1.6;">No action needed. All funds are clean.</div>
                </div>
            </div>
            
            <!-- Step 2: Check-In (Add Funds / Withdraw) -->
            <div id="health-checkin" class="health-checkin-section" style="margin-top: 25px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: #fbbf24; font-size: 1.2em; margin-bottom: 20px;">üí∞ Check-In</h3>
                <p style="color: #94a3b8; margin-bottom: 20px;">Update your wallet when you deposit or withdraw funds.</p>
                
                <div style="display: flex; gap: 15px;">
                    <button id="add-funds-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
                        ‚ûï Add Funds
                    </button>
                    <button id="withdraw-funds-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">
                        ‚ûñ Withdraw
                    </button>
                </div>
            </div>
            
            <!-- Step 3: Session Mode (Active Tracking) -->
            <div id="health-session" class="health-session-section" style="margin-top: 25px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: #fbbf24; font-size: 1.2em; margin-bottom: 20px;">üéÆ Session Mode</h3>
                
                <!-- Session Not Started -->
                <div id="session-not-started" style="display: block;">
                    <p style="color: #94a3b8; margin-bottom: 20px;">Start a new session to track your play in real-time.</p>
                    <button id="start-session-btn" class="btn" style="width: 100%; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                        ‚ñ∂Ô∏è Start New Session
                    </button>
                </div>
                
                <!-- Session Active -->
                <div id="session-active" style="display: none;">
                    <div style="margin-bottom: 20px; padding: 15px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; border-left: 4px solid #22c55e;">
                        <div style="color: #22c55e; font-weight: bold; margin-bottom: 8px;">Session Active</div>
                        <div style="color: #cbd5e1; font-size: 0.9em;">
                            <div>Site: <strong id="session-site">-</strong></div>
                            <div>Game: <strong id="session-game">-</strong></div>
                            <div>Started: <strong id="session-start-time">-</strong></div>
                        </div>
                    </div>
                    
                    <!-- Live Tracker -->
                    <div style="margin-bottom: 20px;">
                        <label style="display: block; color: #cbd5e1; margin-bottom: 10px;">Live Tracker</label>
                        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <input type="number" id="session-win-amount" placeholder="Won amount" step="0.01" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                            <button id="record-win-btn" class="btn btn-small" style="background: #22c55e;">Record Win</button>
                        </div>
                        <div style="display: flex; gap: 10px;">
                            <input type="number" id="session-loss-amount" placeholder="Lost amount" step="0.01" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                            <button id="record-loss-btn" class="btn btn-small" style="background: #ef4444;">Record Loss</button>
                        </div>
                    </div>
                    
                    <!-- Session Summary -->
                    <div style="padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; margin-bottom: 15px;">
                        <div style="color: #cbd5e1; font-size: 0.9em;">
                            <div>Session Total: <strong id="session-total" style="color: #60a5fa;">$0.00</strong></div>
                            <div>Wins: <strong id="session-wins" style="color: #22c55e;">$0.00</strong></div>
                            <div>Losses: <strong id="session-losses" style="color: #f87171;">$0.00</strong></div>
                        </div>
                    </div>
                    
                    <button id="end-session-btn" class="btn" style="width: 100%; background: linear-gradient(135deg, #f87171 0%, #dc2626 100%);">
                        üõë End Session
                    </button>
                </div>
            </div>
            
            <!-- Step 4: Cash Out (End of Day) -->
            <div id="health-cashout" class="health-cashout-section" style="margin-top: 25px; padding: 25px; background: rgba(0, 0, 0, 0.3); border-radius: 12px; border: 1px solid rgba(255, 255, 255, 0.1);">
                <h3 style="color: #fbbf24; font-size: 1.2em; margin-bottom: 20px;">üíµ Cash Out</h3>
                <p style="color: #94a3b8; margin-bottom: 20px;">End your day and save your final balance.</p>
                <button id="cash-out-btn" class="btn" style="width: 100%; background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); margin-bottom: 10px;">
                    üíæ End Day & Save State
                </button>
                <button id="export-data-btn" class="btn" style="width: 100%; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);">
                    üìÅ Export Data & Session History
                </button>
            </div>
            
            <!-- Account Health Status (Legacy - kept for compatibility) -->
            <div id="health-status" class="health-status" style="margin-top: 25px;"></div>
            
            <!-- Legacy Free Spins Section (Hidden but kept for backward compatibility) -->
            <div class="free-spins-section" style="display: none;">
                <h3 style="color: #fbbf24; font-size: 1.1em; margin-bottom: 15px;">üé∞ Free Spins Tracker</h3>
                
                <div class="stat-box" style="margin-bottom: 15px;">
                    <label>Available Free Spins</label>
                    <input type="number" id="health-free-spins" value="0" min="0" step="1">
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; margin-bottom: 8px; color: #cbd5e1;">Spend Free Spins On:</label>
                    <select id="free-spins-game" class="form-control" style="margin-bottom: 10px;">
                        <option value="slots">Slots ($1 per spin)</option>
                        <option value="blackjack">Blackjack ($5 per spin)</option>
                        <option value="roulette">Roulette ($2 per spin)</option>
                        <option value="video-poker">Video Poker ($3 per spin)</option>
                    </select>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="free-spins-amount" value="1" min="1" step="1" style="flex: 1; padding: 8px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="spend-free-spins-btn" class="btn btn-small" style="flex: 1;">Spend Spins</button>
                    </div>
                </div>
                
                <div id="free-spins-result" style="margin-top: 10px; padding: 10px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; display: none; color: #60a5fa; font-size: 0.9em;"></div>
                
                <!-- Free Spin Winnings Tracker -->
                <div style="margin-top: 15px; padding: 12px; background: rgba(251, 191, 36, 0.1); border-radius: 8px; border-left: 3px solid #fbbf24;">
                    <label style="display: block; margin-bottom: 8px; color: #fbbf24; font-weight: bold;">Record Free Spin Winnings</label>
                    <div style="display: flex; gap: 10px; align-items: center;">
                        <input type="number" id="free-spin-winnings" value="0" min="0" step="0.01" placeholder="Won amount" style="flex: 1; padding: 8px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="record-winnings-btn" class="btn btn-small" style="flex: 1;">Record Win</button>
                    </div>
                    <div style="margin-top: 8px; font-size: 0.85em; color: #cbd5e1;">
                        üí° <strong>Strategy:</strong> If you win from free spins, record it here. The system will warn you if you need to "churn" before withdrawing.
                    </div>
                </div>
                
                <!-- Strategic Advice Panel -->
                <div id="free-spins-advice" style="margin-top: 15px; padding: 12px; background: rgba(0, 0, 0, 0.4); border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3); font-size: 0.85em; color: #94a3b8; line-height: 1.6;">
                    <strong style="color: #60a5fa; display: block; margin-bottom: 8px;">üìã Free Spin Strategy Guide</strong>
                    <ul style="margin: 0; padding-left: 20px;">
                        <li><strong>Mix Cash & Free:</strong> Play $20-50 cash before using free spins to avoid "risk-averse" flag</li>
                        <li><strong>Churn Winnings:</strong> If you win from free spins, play through 50%+ before withdrawing</li>
                        <li><strong>Deposit Padding:</strong> Make a clean deposit (no bonus) before heavy free spin usage</li>
                        <li><strong>Progressive Slots:</strong> Excellent camouflage - casinos love players chasing jackpots</li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab 2: Sportsbook (The Migrator) -->
    <div id="tab-sports" class="tab-pane">
        <div class="dashboard-container">
            <h2>üèà Sportsbook Migrator</h2>
            <p>Analyze odds, hedge costs, and build camouflage parlays.</p>
            
            <!-- Money Flow Tracker (Only visible when session is active) -->
            <div id="sports-money-flow" style="display: none; margin-bottom: 25px; padding: 20px; background: rgba(0, 0, 0, 0.4); border-radius: 12px; border: 2px solid rgba(59, 130, 246, 0.3);">
                <h3 style="color: #60a5fa; font-size: 1.1em; margin-bottom: 15px;">üí∞ Money Flow Tracker</h3>
                <div style="margin-bottom: 15px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Current Balance:</span>
                        <span id="sports-balance" style="color: #60a5fa; font-weight: bold; font-size: 1.2em;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between;">
                        <span style="color: #94a3b8;">Session Profit:</span>
                        <span id="sports-profit" style="color: #22c55e; font-weight: bold; font-size: 1.1em;">$0.00</span>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; color: #cbd5e1; margin-bottom: 8px; font-weight: bold;">Track Money Flow</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="number" id="sports-money-amount" step="0.01" min="0" placeholder="Amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="sports-money-in-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">üí∞ Money In</button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="text" id="sports-money-note" placeholder="Note (optional)" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="sports-money-out-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">üíµ Money Out</button>
                    </div>
                    <div style="margin-top: 10px; font-size: 0.85em; color: #94a3b8; line-height: 1.4;">
                        üí° <strong>Money In</strong> = Deposit/Transfer TO gambling site (reduces profit)<br>
                        üí° <strong>Money Out</strong> = Withdrawal/Transfer FROM gambling site (increases profit)
                    </div>
                </div>
                
                <div id="sports-flow-history" style="max-height: 200px; overflow-y: auto; padding: 10px; background: rgba(0, 0, 0, 0.3); border-radius: 8px; font-size: 0.85em;">
                    <div style="color: #94a3b8; margin-bottom: 8px; font-weight: bold;">Recent Transactions:</div>
                    <div id="sports-flow-list" style="color: #cbd5e1;">No transactions yet.</div>
                </div>
            </div>
            
            <!-- Value Finder Section (EV Betting) -->
            <div style="margin-bottom: 25px; padding: 20px; background: rgba(0, 0, 0, 0.4); border-radius: 12px; border: 2px solid rgba(34, 197, 94, 0.3);">
                <h3 style="color: #22c55e; font-size: 1.2em; margin-bottom: 15px;">üí∞ Value Finder (+EV Bet Scanner)</h3>
                <p style="color: #94a3b8; margin-bottom: 15px; font-size: 0.9em;">
                    Scans US sportsbooks for profitable bets using Kelly Criterion. Powered by The Odds API.
                </p>
                
                <div style="margin-bottom: 15px;">
                    <button id="scan-ev-bets-btn" class="btn" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); width: 100%; margin-bottom: 10px;">
                        üîç Scan for +EV Bets
                    </button>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="number" id="ev-bankroll" step="0.01" min="0" placeholder="Bankroll ($)" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <select id="ev-sport" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                            <option value="basketball_nba">NBA (ML Model)</option>
                            <option value="americanfootball_nfl">NFL (EPA Model)</option>
                            <option value="icehockey_nhl">NHL (xG Model)</option>
                            <option value="baseball_mlb">MLB</option>
                        </select>
                    </div>
                </div>
                
                <!-- Hot Bet Alerts -->
                <div id="hot-bets-container" style="display: none;">
                    <div style="color: #fbbf24; font-weight: bold; margin-bottom: 10px; font-size: 0.9em;">üî• Hot Bets Found:</div>
                    <div id="hot-bets-list" style="max-height: 300px; overflow-y: auto;"></div>
                </div>
                
                <!-- Smart Card Modal (shows when clicking a hot bet) -->
                <div id="smart-card-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
                    <div style="max-width: 500px; background: rgba(0,0,0,0.95); padding: 30px; border-radius: 12px; border: 2px solid rgba(34, 197, 94, 0.3);">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                            <h3 style="color: #22c55e; margin: 0;">üéØ Smart Bet Analysis</h3>
                            <button id="close-smart-card" style="background: transparent; border: none; color: #fff; font-size: 1.5em; cursor: pointer;">√ó</button>
                        </div>
                        
                        <div id="smart-card-content">
                            <!-- Market Signal -->
                            <div style="margin-bottom: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border-left: 4px solid #3b82f6;">
                                <div style="color: #60a5fa; font-weight: bold; margin-bottom: 8px;">üìä Market Signal</div>
                                <div id="market-signal-text" style="color: #cbd5e1; font-size: 0.9em;"></div>
                            </div>
                            
                            <!-- Model Signal -->
                            <div style="margin-bottom: 20px; padding: 15px; background: rgba(251, 191, 36, 0.1); border-radius: 8px; border-left: 4px solid #fbbf24;">
                                <div style="color: #fbbf24; font-weight: bold; margin-bottom: 8px;">üß† Model Signal</div>
                                <div id="model-signal-text" style="color: #cbd5e1; font-size: 0.9em;"></div>
                                <div id="model-details" style="margin-top: 10px; font-size: 0.85em; color: #94a3b8;"></div>
                            </div>
                            
                            <!-- Confidence Score -->
                            <div style="margin-bottom: 20px; padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px;">
                                    <span style="color: #cbd5e1; font-weight: bold;">Confidence Score:</span>
                                    <span id="confidence-score" style="color: #22c55e; font-size: 1.2em; font-weight: bold;">0%</span>
                                </div>
                                <div style="width: 100%; height: 8px; background: rgba(255,255,255,0.1); border-radius: 4px; overflow: hidden;">
                                    <div id="confidence-bar" style="height: 100%; background: linear-gradient(90deg, #22c55e 0%, #16a34a 100%); width: 0%; transition: width 0.3s;"></div>
                                </div>
                            </div>
                            
                            <!-- Recommendation -->
                            <div style="margin-bottom: 20px; padding: 15px; background: rgba(34, 197, 94, 0.1); border-radius: 8px; border-left: 4px solid #22c55e;">
                                <div style="color: #22c55e; font-weight: bold; margin-bottom: 8px;">‚úÖ Recommendation</div>
                                <div id="recommendation-text" style="color: #cbd5e1; font-size: 0.9em; line-height: 1.5;"></div>
                            </div>
                            
                            <!-- Bet Size -->
                            <div style="padding: 15px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                                <div style="color: #cbd5e1; font-weight: bold; margin-bottom: 8px;">üí∞ Suggested Bet Size</div>
                                <div id="bet-size-text" style="color: #fbbf24; font-size: 1.1em; font-weight: bold;"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div id="ev-scan-status" style="padding: 10px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; font-size: 0.85em; color: #94a3b8; display: none;">
                    Scanning odds...
                </div>
            </div>
            
            <div class="parlay-calc">
                <!-- API Integration Section -->
                <div class="api-section" style="margin-bottom: 20px; padding-bottom: 20px; border-bottom: 1px solid rgba(255,255,255,0.1);">
                    <h3 style="font-size: 1em; color: #cbd5e1; margin-bottom: 10px;">üî• Live Opportunities</h3>
                    <button id="fetch-odds-btn" class="btn" style="background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); width: 100%;">Fetch High-Value Parlays</button>
                    <div id="api-odds-result" class="api-result" style="margin-top: 10px; display: none;"></div>
                </div>

                <div class="form-group">
                    <label>Event A Odds (Decimal)</label>
                    <input type="number" id="parlay-odds-a" step="0.01" placeholder="1.91">
                </div>
                <div class="form-group">
                    <label>Event B Odds (Decimal)</label>
                    <input type="number" id="parlay-odds-b" step="0.01" placeholder="1.91">
                </div>
                <button id="calc-parlay-btn" class="btn btn-small">Calculate Camouflage Value</button>
                <div id="parlay-result" class="parlay-result"></div>
            </div>
            
            <!-- Win/Loss Tracker for Sportsbook -->
            <div style="margin-top: 25px; padding: 20px; background: rgba(0, 0, 0, 0.4); border-radius: 12px; border: 2px solid rgba(59, 130, 246, 0.3);">
                <h3 style="color: #60a5fa; font-size: 1.1em; margin-bottom: 15px;">üìä Sportsbook Win/Loss Tracker</h3>
                
                <div style="margin-bottom: 15px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Wins:</span>
                        <span id="sports-wins" style="color: #22c55e; font-weight: bold;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Losses:</span>
                        <span id="sports-losses" style="color: #f87171; font-weight: bold;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <span style="color: #cbd5e1; font-weight: bold;">Net Profit:</span>
                        <span id="sports-net-profit" style="color: #60a5fa; font-weight: bold; font-size: 1.1em;">$0.00</span>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; color: #cbd5e1; margin-bottom: 8px; font-weight: bold;">Record Result</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="number" id="sports-win-amount" step="0.01" min="0" placeholder="Win amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="sports-record-win-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">‚úÖ Record Win</button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="sports-loss-amount" step="0.01" min="0" placeholder="Loss amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="sports-record-loss-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">‚ùå Record Loss</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Tab 3: Craps (The Shield) -->
    <div id="tab-craps" class="tab-pane">
        <div class="dashboard-container">
            <h2>üé≤ Craps Odds Optimizer</h2>
            <p>Maximize your 0% House Edge bets (The "Dark Side").</p>
            
            <div class="scanner-form">
                <div class="form-group">
                    <label>Bankroll ($)</label>
                    <input type="number" id="craps-bankroll" value="500">
                </div>
                <div class="form-group">
                    <label>Base Bet ($)</label>
                    <input type="number" id="craps-base-bet" value="10">
                </div>
                <div class="form-group">
                    <label>Point Number</label>
                    <select id="craps-point">
                        <option value="4">4 or 10</option>
                        <option value="5">5 or 9</option>
                        <option value="6">6 or 8</option>
                    </select>
                </div>
                <button id="calc-craps-btn" class="btn btn-small">Calculate Lay Odds</button>
                <div id="craps-result" class="scanner-result"></div>
            </div>
            
            <!-- Win/Loss Tracker for Craps -->
            <div style="margin-top: 25px; padding: 20px; background: rgba(0, 0, 0, 0.4); border-radius: 12px; border: 2px solid rgba(139, 92, 246, 0.3);">
                <h3 style="color: #8b5cf6; font-size: 1.1em; margin-bottom: 15px;">üìä Craps Win/Loss Tracker</h3>
                
                <div style="margin-bottom: 15px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Wins:</span>
                        <span id="craps-wins" style="color: #22c55e; font-weight: bold;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Losses:</span>
                        <span id="craps-losses" style="color: #f87171; font-weight: bold;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <span style="color: #cbd5e1; font-weight: bold;">Net Profit:</span>
                        <span id="craps-net-profit" style="color: #8b5cf6; font-weight: bold; font-size: 1.1em;">$0.00</span>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; color: #cbd5e1; margin-bottom: 8px; font-weight: bold;">Record Result</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="number" id="craps-win-amount" step="0.01" min="0" placeholder="Win amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="craps-record-win-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">‚úÖ Record Win</button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="craps-loss-amount" step="0.01" min="0" placeholder="Loss amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="craps-record-loss-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">‚ùå Record Loss</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Tab 4: Poker Assistant (The Mask) -->
    <div id="tab-poker" class="tab-pane">
        <div class="dashboard-container" style="max-width: 1400px;">
            <h2>‚ô†Ô∏è GTO Poker Assistant</h2>
            <p style="color: #94a3b8; margin-bottom: 20px;">Optimized for PokerStars Ontario players. Make mathematically correct decisions.</p>
            <div class="poker-top-controls">
                <label class="toggle-simple">
                    <input type="checkbox" id="poker-simple-toggle">
                    <span>Simple View (hide matrix, show core action)</span>
                </label>
                <label class="toggle-simple" style="margin-left: 16px;">
                    <input type="checkbox" id="poker-auto-toggle" checked>
                    <span>Auto-calc on change</span>
                </label>
            </div>
            
            <div class="poker-layout">
                <!-- Left Column: Inputs -->
                <div class="poker-inputs">
                    <div class="poker-section">
                        <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px;">Step 1: Game State</h3>
                        
                        <div class="form-group">
                            <label>Action History</label>
                            <select id="poker-action-history" class="form-control">
                                <option value="srp">Single Raised Pot (SRP)</option>
                                <option value="3bet">3-Bet Pot</option>
                                <option value="4bet">4-Bet Pot</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Hero Position</label>
                            <select id="poker-hero-pos" class="form-control">
                                <option value="UTG">UTG</option>
                                <option value="HJ">HJ</option>
                                <option value="CO">CO</option>
                                <option value="BTN">BTN</option>
                                <option value="SB">SB</option>
                                <option value="BB">BB</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Villain Position</label>
                            <select id="poker-villain-pos" class="form-control">
                                <option value="UTG">UTG</option>
                                <option value="HJ">HJ</option>
                                <option value="CO">CO</option>
                                <option value="BTN">BTN</option>
                                <option value="SB">SB</option>
                                <option value="BB">BB</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="poker-section">
                        <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px;">Step 2: Hole Cards</h3>
                        <div style="margin-bottom: 10px; padding: 10px; background: rgba(59, 130, 246, 0.1); border-radius: 6px; font-size: 0.85em; color: #94a3b8;">
                            üí° <strong>Equity Calculator:</strong> Win % calculated using node-poker-odds-calculator
                        </div>
                        <div class="quick-row">
                            <button class="quick-btn" data-hole="AsKs">AA/KK+</button>
                            <button class="quick-btn" data-hole="AdKc">AKo</button>
                            <button class="quick-btn" data-hole="9h8h">98s</button>
                            <button class="quick-btn" data-hole="Jc3s">J3o</button>
                        </div>
                        <div class="card-selector">
                            <div class="card-slot" id="hole-card-1">
                                <div class="card-placeholder">Card 1</div>
                            </div>
                            <div class="card-slot" id="hole-card-2">
                                <div class="card-placeholder">Card 2</div>
                            </div>
                        </div>
                        <div id="card-selector-modal" class="card-selector-modal" style="display: none;">
                            <div class="card-selector-grid"></div>
                        </div>
                    </div>
                    
                    <div class="poker-section">
                        <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px;">Step 3: Board</h3>
                        <div class="quick-row">
                            <button class="quick-btn" data-board="Ah7d2c">Dry A72r</button>
                            <button class="quick-btn" data-board="KsKd4s">Paired K K 4</button>
                            <button class="quick-btn" data-board="JsTs9s">Wet J T 9 ss</button>
                            <button class="quick-btn" data-board="">Clear</button>
                        </div>
                        <div class="board-cards">
                            <div class="card-slot board-card" data-street="flop" data-index="0">
                                <div class="card-placeholder">Flop 1</div>
                            </div>
                            <div class="card-slot board-card" data-street="flop" data-index="1">
                                <div class="card-placeholder">Flop 2</div>
                            </div>
                            <div class="card-slot board-card" data-street="flop" data-index="2">
                                <div class="card-placeholder">Flop 3</div>
                            </div>
                            <div class="card-slot board-card" data-street="turn" data-index="3">
                                <div class="card-placeholder">Turn</div>
                            </div>
                            <div class="card-slot board-card" data-street="river" data-index="4">
                                <div class="card-placeholder">River</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="poker-section">
                        <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px;">Step 4: Villain Action</h3>
                        <div class="form-group">
                            <label>Villain Action</label>
                            <select id="poker-villain-action" class="form-control">
                                <option value="check">Checked</option>
                                <option value="bet33">Bet 33% Pot</option>
                                <option value="bet75">Bet 75% Pot</option>
                                <option value="allin">All-in / Jam</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="poker-section">
                        <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px;">Step 5: Stack & Pot</h3>
                        <div class="form-group">
                            <label>Effective Stack ($)</label>
                            <div class="stack-presets">
                                <button class="preset-btn" data-stack="100">100bb</button>
                                <button class="preset-btn" data-stack="50">50bb</button>
                                <button class="preset-btn" data-stack="25">25bb</button>
                            </div>
                            <input type="number" id="poker-stack" value="100" class="form-control">
                        </div>
                        <div class="form-group">
                            <label>Pot Size ($)</label>
                            <input type="number" id="poker-pot" value="20" class="form-control">
                        </div>
                        <div id="spr-display" class="spr-display">
                            <div class="spr-label">SPR: <span id="spr-value">5.0</span></div>
                            <div class="spr-gauge">
                                <div class="spr-bar" id="spr-bar"></div>
                            </div>
                            <div id="spr-advice" class="spr-advice"></div>
                        </div>
                    </div>
                    
                    <button id="calc-poker-btn" class="btn" style="width: 100%; margin-top: 15px;">Calculate GTO Strategy</button>
                </div>
                
                <!-- Center Column: Hand Matrix -->
                <div class="poker-matrix">
                    <!-- Header/Title -->
                    <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px; text-align: center;">Hand Matrix (13x13)</h3>
                    
                    <!-- The Grid is INSIDE the box -->
                    <div id="hand-matrix" class="hand-matrix-grid"></div>
                    
                    <div class="matrix-legend">
                        <div class="legend-item"><span class="legend-color" style="background: #ef4444;"></span> Raise</div>
                        <div class="legend-item"><span class="legend-color" style="background: #22c55e;"></span> Call</div>
                        <div class="legend-item"><span class="legend-color" style="background: #3b82f6;"></span> Fold</div>
                    </div>
                </div>
                
                <!-- Right Column: Strategy Results -->
                <div class="poker-results">
                    <h3 style="color: #fbbf24; font-size: 1em; margin-bottom: 10px;">GTO Recommendation</h3>
                    <div id="poker-strategy-result" class="strategy-result-panel">
                        <div class="strategy-action" id="strategy-action">Enter game state to see recommendation</div>
                        <div class="strategy-frequencies" id="strategy-frequencies"></div>
                        <div class="strategy-sizing" id="strategy-sizing"></div>
                        <div class="strategy-context" id="strategy-context"></div>
                    </div>
                    
                    <!-- Equity Calculator Results -->
                    <div id="equity-calculator" style="margin-top: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border: 1px solid rgba(59, 130, 246, 0.3); display: none;">
                        <h4 style="color: #60a5fa; font-size: 0.9em; margin-bottom: 10px;">üìä Equity Calculator</h4>
                        <div id="equity-result" style="color: #cbd5e1; font-size: 0.85em;">
                            Calculate equity by entering your hand and opponent range.
                        </div>
                        <button id="calculate-equity-btn" class="btn" style="width: 100%; margin-top: 10px; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); font-size: 0.9em;">
                            Calculate Win %
                        </button>
                    </div>
                </div>
            </div>
            
            <!-- Win/Loss Tracker for Poker -->
            <div style="margin-top: 25px; padding: 20px; background: rgba(0, 0, 0, 0.4); border-radius: 12px; border: 2px solid rgba(251, 191, 36, 0.3);">
                <h3 style="color: #fbbf24; font-size: 1.1em; margin-bottom: 15px;">üìä Poker Win/Loss Tracker</h3>
                
                <div style="margin-bottom: 15px; padding: 12px; background: rgba(0, 0, 0, 0.3); border-radius: 8px;">
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Wins:</span>
                        <span id="poker-wins" style="color: #22c55e; font-weight: bold;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                        <span style="color: #94a3b8;">Losses:</span>
                        <span id="poker-losses" style="color: #f87171; font-weight: bold;">$0.00</span>
                    </div>
                    <div style="display: flex; justify-content: space-between; padding-top: 8px; border-top: 1px solid rgba(255,255,255,0.1);">
                        <span style="color: #cbd5e1; font-weight: bold;">Net Profit:</span>
                        <span id="poker-net-profit" style="color: #fbbf24; font-weight: bold; font-size: 1.1em;">$0.00</span>
                    </div>
                </div>
                
                <div style="margin-bottom: 15px;">
                    <label style="display: block; color: #cbd5e1; margin-bottom: 8px; font-weight: bold;">Record Result</label>
                    <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                        <input type="number" id="poker-win-amount" step="0.01" min="0" placeholder="Win amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="poker-record-win-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">‚úÖ Record Win</button>
                    </div>
                    <div style="display: flex; gap: 10px;">
                        <input type="number" id="poker-loss-amount" step="0.01" min="0" placeholder="Loss amount" style="flex: 1; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                        <button id="poker-record-loss-btn" class="btn" style="flex: 1; background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);">‚ùå Record Loss</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Tab 5: Guide -->
    <div id="tab-guide" class="tab-pane">
        <div class="dashboard-container">
            <h2>üìö The Money Flow: Engine & Camouflage</h2>
            <div class="guide-content">
                <div class="guide-section">
                    <h3>The Core Concept</h3>
                    <p>You are building a machine with two distinct parts: <strong>The Engine (Casino)</strong> and <strong>The Camouflage (Sportsbook)</strong>.</p>
                    <p style="color: #f87171;"><strong>CRITICAL RULE:</strong> NEVER withdraw directly from the Sportsbook. This triggers limits.</p>
                </div>

                <div class="guide-section">
                    <h3>1. The Engine (Casino) = "Money Printer"</h3>
                    <p><strong>Goal:</strong> Unlock +5% Gift Card profit & clear deposit bonuses.</p>
                    <ul>
                        <li><strong>Game:</strong> IGT Video Blackjack (RNG).</li>
                        <li><strong>Strategy:</strong> Use Tab 1 "Wash Mode" (Perfect Basic Strategy).</li>
                        <li><strong>Risk:</strong> Extremely Low (~0.5% House Edge).</li>
                        <li><strong>Result:</strong> Generates "Clean Cash" & Credit Card Points. High Volume/Turnover is good here.</li>
                    </ul>
                </div>

                <div class="guide-section">
                    <h3>2. The Incubator (Sportsbook) = "Camouflage"</h3>
                    <p><strong>Goal:</strong> Look like a "Square" (bad gambler) who loves long-shot parlays. Fixes Withdrawal-to-Play ratio.</p>
                    <ul>
                        <li><strong>Action:</strong> Transfer CASINO PROFITS here. Do NOT withdraw.</li>
                        <li><strong>Strategy:</strong> Bet on Systematic Parlays (High Odds, High Variance).</li>
                        <li><strong>Outcome A (Lose):</strong> Algorithm sends bonuses. (Good).</li>
                        <li><strong>Outcome B (Win):</strong> "High Variance" winnings look less suspicious.</li>
                    </ul>
                </div>

                <div class="guide-section">
                    <h3>The Flow Chart (Step-by-Step)</h3>
                    <ol style="padding-left: 20px; color: #cbd5e1;">
                        <li><strong>Input:</strong> Credit Card -> Gift Card (+5%) -> Deposit to FanDuel.</li>
                        <li><strong>The Wash:</strong> Play 1x through on Casino Video BJ (Tab 1). Funds are now "Clean".</li>
                        <li><strong>The Transfer:</strong> Move Profits to Sportsbook wallet.</li>
                        <li><strong>Camouflage Bet:</strong> Place a high-odds parlay (e.g. +600). Hedge at another book (Pinnacle).</li>
                        <li><strong>The Exit (Scenario A - Lose on FD):</strong> Best case. Money is gone from FD, doubled in Pinnacle. Withdraw from Pinnacle.</li>
                        <li><strong>The Exit (Scenario B - Win on FD):</strong> Transfer winnings BACK to Casino. Play 15 min "Cool Down" slots/BJ. Withdraw from Casino.</li>
                    </ol>
                </div>
                
                <div id="guide-next-steps" class="guide-next-steps" style="display: none;">
                    <h3>üöÄ Your Next Best Step</h3>
                    <div id="guide-recommendation-text">Sign in to see personalized recommendations.</div>
                    <button id="guide-action-btn" class="btn btn-small" style="margin-top: 10px;">Go to Action</button>
                </div>
            </div>
        </div>
    </div>
    </main>

    <!-- Guide Overlay -->
    <div id="guide-overlay" class="guide-overlay" style="display: none;">
        <div class="guide-overlay-header">
            <h3>üöÄ Next Step</h3>
            <button id="close-guide-overlay" class="btn-icon">√ó</button>
        </div>
        <div id="overlay-rec-text">Loading recommendation...</div>
        <button id="overlay-action-btn" class="btn btn-small">Go</button>
    </div>

    <!-- Profile Stats Modal -->
    <div id="profile-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 500px;">
            <h2>üë§ Lifetime Account Stats</h2>
            <p>Your overall historical data (persists across sessions).</p>
            
            <div class="health-stats">
                <div class="stat-box">
                    <label>Total Deposited</label>
                    <input type="number" id="profile-deposit" readonly>
                </div>
                <div class="stat-box">
                    <label>Lifetime Casino</label>
                    <input type="number" id="profile-casino" readonly>
                </div>
                <div class="stat-box">
                    <label>Lifetime Sports</label>
                    <input type="number" id="profile-sports" readonly>
                </div>
                <div class="stat-box">
                    <label>Total Withdrawn</label>
                    <input type="number" id="profile-withdraw" readonly>
                </div>
            </div>
            
            <div style="margin-top: 20px; display: flex; justify-content: flex-end;">
                <button id="profile-close-btn" class="btn">Close</button>
            </div>
        </div>
    </div>

    <!-- Add Funds Modal -->
    <div id="add-funds-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 400px; background: rgba(0,0,0,0.9); padding: 30px; border-radius: 12px;">
            <h2 style="color: #fbbf24; margin-bottom: 20px;">‚ûï Add Funds</h2>
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">Amount ($)</label>
                <input type="number" id="add-funds-amount" step="0.01" min="0" placeholder="100.00" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">Source</label>
                <select id="add-funds-source" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                    <option value="bonus-match">Bonus Match</option>
                    <option value="gift-card">Gift Card</option>
                    <option value="direct-deposit">Direct Deposit</option>
                    <option value="transfer">Transfer from Other Site</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="add-funds-confirm-btn" class="btn" style="flex: 1; background: #22c55e;">Confirm</button>
                <button id="add-funds-cancel-btn" class="btn" style="flex: 1; background: #64748b;">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Withdraw Modal -->
    <div id="withdraw-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 400px; background: rgba(0,0,0,0.9); padding: 30px; border-radius: 12px;">
            <h2 style="color: #fbbf24; margin-bottom: 20px;">‚ûñ Withdraw</h2>
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">Amount ($)</label>
                <input type="number" id="withdraw-amount" step="0.01" min="0" placeholder="100.00" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">Destination</label>
                <select id="withdraw-destination" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                    <option value="bank">Bank Account</option>
                    <option value="crypto">Crypto Wallet</option>
                    <option value="other-site">Other Site</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="withdraw-confirm-btn" class="btn" style="flex: 1; background: #ef4444;">Confirm</button>
                <button id="withdraw-cancel-btn" class="btn" style="flex: 1; background: #64748b;">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Start Session Modal -->
    <div id="start-session-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 400px; background: rgba(0,0,0,0.9); padding: 30px; border-radius: 12px;">
            <h2 style="color: #fbbf24; margin-bottom: 20px;">‚ñ∂Ô∏è Start New Session</h2>
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">Which site?</label>
                <select id="session-site-select" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                    <option value="pokerstars">PokerStars</option>
                    <option value="draftkings">DraftKings</option>
                    <option value="fanduel">FanDuel</option>
                    <option value="betmgm">BetMGM</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div style="margin-bottom: 20px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">What game?</label>
                <select id="session-game-select" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
                    <option value="blackjack">Blackjack</option>
                    <option value="poker">Poker</option>
                    <option value="slots">Slots</option>
                    <option value="sports">Sports</option>
                    <option value="other">Other</option>
                </select>
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="start-session-confirm-btn" class="btn" style="flex: 1; background: #3b82f6;">Start</button>
                <button id="start-session-cancel-btn" class="btn" style="flex: 1; background: #64748b;">Cancel</button>
            </div>
        </div>
    </div>
    
    <!-- Cash Out Confirmation Modal -->
    <div id="cashout-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 400px; background: rgba(0,0,0,0.9); padding: 30px; border-radius: 12px;">
            <h2 style="color: #fbbf24; margin-bottom: 20px;">üíµ Cash Out</h2>
            <div style="margin-bottom: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 8px;">
                <div style="color: #cbd5e1; margin-bottom: 8px;">Final Balance</div>
                <div id="cashout-final-balance" style="font-size: 1.5em; font-weight: bold; color: #60a5fa;">$0.00</div>
            </div>
            <p style="color: #94a3b8; margin-bottom: 20px;">Is this correct? This will save your state for tomorrow.</p>
            <div style="display: flex; gap: 10px;">
                <button id="cashout-confirm-btn" class="btn" style="flex: 1; background: #8b5cf6;">Yes, Save</button>
                <button id="cashout-cancel-btn" class="btn" style="flex: 1; background: #64748b;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- LIVE MIRROR Sync Modal -->
    <div id="live-sync-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 400px; background: rgba(0,0,0,0.9); padding: 30px; border-radius: 12px; border: 2px solid rgba(239, 68, 68, 0.3);">
            <h2 style="color: #ef4444; margin-bottom: 10px;">üî¥ LIVE MIRROR Mode</h2>
            <p style="color: #94a3b8; margin-bottom: 20px; font-size: 0.9em;">Sync your app with your real casino balance.</p>
            <div style="margin-bottom: 15px;">
                <label style="display: block; color: #cbd5e1; margin-bottom: 8px;">Current Casino Balance ($)</label>
                <input type="number" id="sync-balance" step="0.01" min="0" placeholder="500.00" style="width: 100%; padding: 10px; border-radius: 6px; background: rgba(0,0,0,0.3); border: 1px solid rgba(255,255,255,0.2); color: #fff;">
            </div>
            <div style="padding: 12px; background: rgba(239, 68, 68, 0.1); border-radius: 8px; margin-bottom: 20px; font-size: 0.85em; color: #f87171;">
                ‚ö†Ô∏è <strong>Warning:</strong> In LIVE MIRROR mode, all actions update your real database. Make sure you're tracking accurately.
            </div>
            <div style="display: flex; gap: 10px;">
                <button id="sync-confirm-btn" class="btn" style="flex: 1; background: #ef4444;">Sync & Start</button>
                <button id="sync-cancel-btn" class="btn" style="flex: 1; background: #64748b;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Login Modal -->
    <div id="login-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 2000; justify-content: center; align-items: center;">
        <div class="dashboard-container" style="max-width: 400px;">
            <h2>üë§ Sign In</h2>
            <div class="form-group">
                <label>Username</label>
                <input type="text" id="login-username" placeholder="Enter username">
            </div>
            <div style="margin-top: 20px; display: flex; gap: 10px;">
                <button id="modal-login-btn" class="btn">Login</button>
                <button id="modal-cancel-btn" class="btn" style="background: #64748b;">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Right Side Simulator Mode Panel (hidden until icon is clicked) -->
    <div class="simulator-sidebar" style="display: none;">
        <div class="simulator-panel" id="simulator-panel">
            <div class="simulator-header">
                <h3>üéÆ Mode Selector</h3>
                <button class="close-simulator-btn" id="close-simulator-btn" style="background: transparent; border: none; color: #fff; font-size: 1.5em; cursor: pointer; padding: 0; width: 30px; height: 30px;">√ó</button>
            </div>
            <div class="simulator-content">
                <!-- Live Switch Toggle -->
                <div style="margin-bottom: 20px;">
                    <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 15px;">
                        <div style="flex: 1;">
                            <div style="font-size: 0.9em; color: #94a3b8; margin-bottom: 5px;">Current Mode</div>
                            <div id="mode-status" style="font-size: 1.2em; font-weight: bold; color: #60a5fa;">‚ö™ SIMULATOR</div>
                        </div>
                        <label class="live-switch" style="position: relative; display: inline-block; width: 100px; height: 45px;">
                            <input type="checkbox" id="live-mode-toggle" style="opacity: 0; width: 0; height: 0;">
                            <span class="slider" style="position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #3b82f6; transition: 0.4s; border-radius: 50px;">
                                <span class="slider-text" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-weight: bold; font-size: 0.7em; white-space: nowrap; pointer-events: none;">SIM</span>
                            </span>
                        </label>
                    </div>
                    <div id="live-mode-info" style="padding: 12px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; font-size: 0.85em; color: #94a3b8; line-height: 1.5;">
                        Practice mode: Money is fake. Stats do not save to your real bankroll.
                    </div>
                </div>
                
                <!-- The Coach (Only visible in LIVE MIRROR mode) -->
                <div id="the-coach" class="the-coach" style="display: none; margin-top: 20px; padding: 15px; background: rgba(0, 0, 0, 0.4); border-radius: 10px; border: 2px solid rgba(251, 191, 36, 0.3);">
                    <div class="coach-header" style="margin-bottom: 12px;">
                        <h4 style="color: #fbbf24; font-size: 1em; margin: 0;">üéì The Coach</h4>
                    </div>
                    <div id="coach-status" class="coach-status" style="padding: 10px; background: rgba(0, 0, 0, 0.3); border-radius: 6px; margin-bottom: 8px; font-size: 0.85em;">
                        <div style="color: #94a3b8;">Waiting for session data...</div>
                    </div>
                    <div id="coach-recommendation" class="coach-recommendation" style="padding: 10px; background: rgba(251, 191, 36, 0.1); border-radius: 6px; border-left: 3px solid #fbbf24; margin-bottom: 8px;">
                        <div style="color: #fbbf24; font-weight: bold; margin-bottom: 4px; font-size: 0.85em;">Recommendation</div>
                        <div id="coach-recommendation-text" style="color: #cbd5e1; font-size: 0.8em; line-height: 1.4;">Start playing to get recommendations.</div>
                    </div>
                    <div id="coach-reason" class="coach-reason" style="padding: 8px; background: rgba(0, 0, 0, 0.3); border-radius: 6px; font-size: 0.75em; color: #94a3b8; line-height: 1.3;">
                        <div id="coach-reason-text">The Coach monitors your play patterns and account health.</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Right Side Export Panel (hidden until export button is pressed) -->
    <div class="export-sidebar" style="display: none;">
        <div class="export-panel" id="export-panel">
            <div class="export-header">
                <h3>üìÅ Export Data & Session History</h3>
                <button class="close-export-btn" id="close-export-btn" style="background: transparent; border: none; color: #fff; font-size: 1.5em; cursor: pointer; padding: 0; width: 30px; height: 30px;">√ó</button>
            </div>
            <div class="export-content">
                <p style="color: #94a3b8; margin-bottom: 20px; line-height: 1.6;">
                    Export your session history, statistics, and game data to .txt files. 
                    Choose a folder location and the app will create organized files for you.
                </p>
                
                <div id="export-status" style="margin-bottom: 20px; padding: 15px; background: rgba(59, 130, 246, 0.1); border-radius: 8px; border-left: 3px solid #3b82f6; display: none;">
                    <div style="color: #60a5fa; font-weight: bold; margin-bottom: 8px;">Status</div>
                    <div id="export-status-text" style="color: #cbd5e1; font-size: 0.9em; line-height: 1.5;"></div>
                </div>
                
                <div style="margin-bottom: 20px;">
                    <div style="color: #cbd5e1; font-weight: bold; margin-bottom: 10px;">What will be exported:</div>
                    <ul style="color: #94a3b8; font-size: 0.9em; line-height: 1.8; padding-left: 20px;">
                        <li><strong>session_history.txt</strong> - All completed sessions with detailed records</li>
                        <li><strong>stats.txt</strong> - Financial summary and live mirror statistics</li>
                        <li><strong>game_stats.txt</strong> - Win/loss tracking for Sportsbook, Craps, and Poker</li>
                    </ul>
                </div>
                
                <button id="export-now-btn" class="btn" style="width: 100%; background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); font-size: 1.1em; padding: 15px;">
                    üìÅ Export Data Now
                </button>
                
                <div style="margin-top: 15px; padding: 12px; background: rgba(251, 191, 36, 0.1); border-radius: 8px; font-size: 0.85em; color: #fbbf24;">
                    üí° <strong>Tip:</strong> In Chrome/Edge, you can choose a folder location. In other browsers, files will download to your Downloads folder.
                </div>
            </div>
        </div>
    </div>

    <!-- Right Side Donation Panel (hidden until coffee button is pressed) -->
    <div class="donation-sidebar" style="display: none;">
        <div class="donation-panel" id="donation-panel">
            <div class="donation-header">
                <h3>üíù Support the Game</h3>
            </div>
            <div class="donation-content">
                <p class="donation-description">Enjoying the tool? Consider making a donation to support development!</p>
                <form id="donation-form" class="donation-form">
                    <div class="form-group">
                        <label for="donor-name">Name</label>
                        <input type="text" id="donor-name" name="name" placeholder="Your name" required>
                    </div>
                    <div class="form-group">
                        <label for="card-number">Card Number</label>
                        <input type="text" id="card-number" name="cardNumber" placeholder="1234 5678 9012 3456" maxlength="19" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="expiry-date">Expiry Date</label>
                            <input type="text" id="expiry-date" name="expiryDate" placeholder="MM/YY" maxlength="5" required>
                        </div>
                        <div class="form-group">
                            <label for="cvv">CVV</label>
                            <input type="text" id="cvv" name="cvv" placeholder="123" maxlength="4" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="donation-amount">Donation Amount ($)</label>
                        <input type="number" id="donation-amount" name="amount" placeholder="10.00" min="1" step="0.01" required>
                    </div>
                    <div class="form-group">
                        <label for="donor-email">Email (Optional)</label>
                        <input type="email" id="donor-email" name="email" placeholder="your@email.com">
                    </div>
                    <button type="submit" class="btn btn-donate">Send Donation</button>
                </form>
                <div id="donation-message" class="donation-message"></div>
            </div>
        </div>
    </div>

    <!-- Bottom Left Logo Sidebar -->
    <div class="logo-sidebar">
        <a class="logo-simulator" id="logo-simulator" aria-label="Mode Selector" href="#simulator-panel" style="margin-bottom: 12px;">üéÆ</a>
        <a class="logo-export" id="logo-export" aria-label="Export Data" href="#export-panel" style="margin-bottom: 12px;">üìÅ</a>
        <a class="logo-coffee" aria-label="Support the game" href="#donation-panel">‚òï</a>
        <div class="logo-container">
            <div class="logo">‚ô†Ô∏è</div>
            <div class="logo-text">Blackjack</div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>

